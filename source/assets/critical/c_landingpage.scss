/*! autoprefixer: off */
@import 'global';
@import 'header';
@import 'footer';
@import '../../_patterns/variables';
@import '../../_patterns/breakpoints';
@import '../../_patterns/mixins';
@import '../../_patterns/10-atoms/indicators/shimmer';
@import '../../_patterns/10-atoms/wrapper/ratio';
@import '../../_patterns/40-templates/landingpage';

body.body--loading.body--loading {
  .h-loading-only {
    display: block;
  }

  .collection {
    max-width: 100%;
    margin: $collection-gap 0 0;

    @include tablet-up {
      margin-top: $collection-gap-tablet-up;
    }

    @include desktop-wide {
      margin-top: $collection-gap-desktop-wide;
    }

    .collection__content-wrapper {
      max-width: $desktop-wide-size;
      margin: 0 auto;
      background-color: transparent;
      box-shadow: none;
    }
  }

  .collection--branded {
    background-size: cover;

    .collection__branding-wrapper {
      max-width: 100%;
      margin-left: 0;
      margin-right: 0;
    }

    // no space between two branded collections
    & + .collection--branded {
      margin-top: 0;
    }

    // no space between header and an branded collection at first position
    &:first-child {
      margin-top: 0;
    }
  }

  .collection__branding-wrapper {
    max-width: $desktop-wide-size;
    margin-left: auto;
    margin-right: auto;
  }

  .collection__content-wrapper {
    display: flex;
    flex-direction: column;
  }

  .collection__teaser-list {
    display: flex;
    flex-direction: column;
    margin: 0 8px 12px;
    padding: 0;

    @include tablet-up {
      flex-direction: row;
      flex-wrap: wrap;
      align-items: stretch;
      margin: 0 calc(32px - #{$teaser-col-gap-tablet-up}) -16px 32px;
    }

    @include desktop-wide {
      margin: 0 calc(40px - #{$teaser-col-gap-desktop-wide}) -20px 40px;
    }
  }

  .collection__teaser-item {
    display: flex;

    @include smartphone {
      margin: 0 0 8px;
      &:last-child {
        margin-bottom: 0;
      }

      &:nth-child(n+2) {
        .teaser__main {
          flex-direction: row-reverse;
        }
        .teaser__medium-wrapper {
          padding-bottom: 0;
          width: 80px;
          height: 80px;
          margin: 16px 16px 16px 0;
          border-radius: 2px;
          overflow: hidden;
        }
        .teaser__medium {
          object-fit: cover;
        }
      }
    }

    @include tablet-up {
      flex-grow: 0;
      flex-shrink: 0;
      @include IESafeFlexBasis(33.3333334%);
      margin: 0;
      padding: 0 $teaser-col-gap-tablet-up 32px 0;
    }

    @include desktop-wide {
      padding: 0 $teaser-col-gap-desktop-wide 40px 0;
    }
  }

  .collection__title {
    display: block;
    margin: 16px 24px 12px;
    font-family: $font-medium;
    @include fontSize(24);
    font-weight: 500;
    font-style: normal;
    font-stretch: normal;
    line-height: $emphasize-line-height-ratio;
    color: $color-text-default;

    @include tablet-up {
      margin: 16px 32px 12px;
    }

    @include desktop-up {
      margin: 20px 32px 16px;
      @include fontSize(28);
    }

    @include desktop-wide {
      margin: 20px 40px 16px;
    }
  }

  .collection__lead {
    display: none;
  }

  .collection__title-text {
    display: none;
  }

  .collection__title-link {
    display: none;
  }

  .collection--hero {
    .collection__teaser-item {
      @include tablet-up {
        // First element: XL Teaser. Full width
        &:nth-child(1) {
          flex-basis: 100%;
        }
      }
    }
  }

  .collection--duo {
    .collection__teaser-item {
      @include tablet-up {
        flex-grow: 0;
        flex-shrink: 0;
        @include IESafeFlexBasis(33.3333334%);
        padding: 0 $teaser-col-gap-tablet-up 32px 0;

        &:nth-child(1),
        &:nth-child(2) {
          flex-basis: 50%;
        }
      }

      @include desktop-wide {
        padding: 0 $teaser-col-gap-desktop-wide 40px 0;
      }
    }
  }

  // Borderless: teasers + teaser-items take up 100% of the width
  .collection--borderless {
    .collection__teaser-item {
      width: 100%;
    }
  }

  // Selectable: Hide the selection element, show the first collection after it.
  // From that collection, only show the first 3 teasers
  .selectable {
    display: none;
  }

  .collection--selectable {
    display: none;
    margin-top: 0;

    .selectable-button {
      display: none;
    }
  }

  .selectable-wrapper {
    margin: $collection-gap 0 0;

    @include tablet-up {
      margin-top: $collection-gap-tablet-up;
    }

    @include desktop-wide {
      margin-top: $collection-gap-desktop-wide;
    }
  }

  .selectable-wrapper--branded {
    .collection--branded + &,
    .selectable-wrapper--branded + &,
    & + .collection--branded,
    &:first-child {
      // no space between:
      // * two branded selection wrappers
      // * a branded selection wrapper and a branded selection
      // * a branded selection and a branded selection wrapper
      // * header and a branded selection wrapper at first position
      margin-top: 0;
    }
  }

  // Selectable: show first 3 teasers of first collection:
  .selectable + .collection--selectable {
    display: block;

    .collection__teaser-item:nth-child(n+4) {
      display: none;
    }
  }

  .teaser {
    display: flex;
    flex-grow: 1;
    position: relative; // to position the pseudo elements
    border-radius: 2px;
    overflow: hidden; // to cut off image with border radius
    background-color: $color-bg-card;
    box-shadow: $shadow-elevation1;
    color: $color-text-default;
  }

  .teaser__medium-wrapper {
    flex-grow: 0;
    flex-shrink: 0;
    margin: 0;
    position: relative; // for positioning ::pseudo elements

    &::after {
      position: absolute;
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      background-color: #dadad2;
      top: 0;
      left: 0;
      box-sizing: border-box;
    }
    img {
      display: none;
    }

  }

  .teaser__main {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
  }

  .teaser__main-outer-wrapper {
    display: none;
  }

  .teaser__content,
  .teaser__label {
    display: none;
  }

  .teaser__content-shimmer {
    flex-basis: 0;
    flex-grow: 1;
    flex-shrink: 1;
    margin: 16px 12px 16px 16px;

    @include desktop-wide {
      margin: 24px;
    }
  }

  .teaser__scoreboard,
  .teaser__opinion,
  .teaser__links {
    display: none;
  }

  .ratio::before {
    content: "";
    width: 1px;
    margin-left: -1px;
    float: left;
    height: 0;
  }

  .ratio::after {
    content: "";
    display: table;
    clear: both;
  }

  .ratio--16-9::before {
    padding-top: 56.25%;
  }

  .teaser--static {
    width: 100%;
  }

  .teaser--size-xl {
    @include tablet-up {
      .teaser__main {
        flex-direction: row;
      }
      .teaser__medium-wrapper {
        flex-basis: $teaser-xl-medium-ratio;
      }
    }
  }

  .teaser--longform {
    flex-direction: column;
  }

  .teaser__longform-medium {
    position: relative;
    background-color: $color-image-dummy;

    & > .image {
      visibility: hidden;
      @include forceAspectRatio("16:9");
    }
  }

  .teaser--longform.teaser--size-xl {
    @include tablet-up {
      flex-direction: row;

      .teaser__longform-medium {
          flex-basis: $teaser-xl-medium-ratio;
      }
    }
  }
}
