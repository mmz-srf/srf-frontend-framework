{% set commentIds = [] %}
{% for comment in comments %}
    {% set commentIds = commentIds|merge([comment.id]) %}
    <li class="comment_{{ comment.id }} comment">
        <cite class="comment__user {% if comment.isEditorialAnswer %} comment__user--srf{% endif %}" role="combobox">
            <span class="h-offscreen">{{ 'Kommentar von'|trans }} </span>{{ comment.name }}
            {% if comment.isEditorialAnswer %}<span
                    class="h-offscreen">(SRF)</span>{% else %}({{ comment.nickname }}){% endif %}
        </cite>
        <span class="comment__time">{{ comment.dateFormatted }}</span>
        <blockquote class="comment__content">{{ comment.message }}</blockquote>
        <a class="comment__link comment__link--agree" role="link" title="{{ 'Zustimmen'|trans }}" href="#{{ comment.id }}-agree">
            {{ 'Zustimmen'|trans }}
            <span class="h-offscreen">{{ 'dem Kommentar zustimmen'|trans }}</span>
            <span class="count"></span>
        </a><span class="vertical-separator" aria-hidden="true" role="presentation"></span>
        <a class="comment__link comment__link--deny" role="link" title="{{ 'Ablehnen'|trans }}" href="#{{ comment.id }}-deny">
            {{ 'Ablehnen'|trans }}
            <span class="h-offscreen">{{ 'den Kommentar ablehnen'|trans }}</span>
            <span class="count"></span>
        </a>

        {% if allowsComments %}
            <span class="vertical-separator" aria-hidden="true" role="presentation"></span>
            <a class="comment__link comment__link--reply" href="#{{ comment.id }}-reply"
               role="link" title="{{ 'Antworten'|trans }}">{{ 'Antworten'|trans }}
                <span class="h-offscreen">{{ 'anw√§hlen um auf den Kommentar zu antworten'|trans }}</span>
            </a>
            <span class="placeholder_{{ comment.id }} comment__placeholder"></span>
        {% endif %}
        {% if comment.children|length > 0 %}
            <ol class="comments comments--replies">
                {% for reply in comment.children %}
                    {% set commentIds = commentIds|merge([reply.id]) %}
                    <li class="comment_{{ reply.id }} comment">
                        <span class="h-offscreen">{{ 'Antwort von'|trans }} </span>
                        <cite class="comment__user {% if reply.isEditorialAnswer %} comment__user--srf{% endif %}">
                            {{ reply.name }}{% if not reply.isEditorialAnswer %} ({{ reply.nickname }}){% endif %}</cite>
                        <span class="comment__time">{{ reply.dateFormatted }}</span>
                        <blockquote class="comment__content">{{ reply.message }}</blockquote>
                        <a class="comment__link comment__link--agree" title="{{ 'Zustimmen'|trans }}" role="link" href="#{{ comment.id }}-agree">
                            {{ 'Zustimmen'|trans }}
                            <span class="h-offscreen">{{ 'dem Kommentar zustimmen'|trans }}</span>
                            <span class="count"></span>
                        </a><span class="vertical-separator" aria-hidden="true" role="presentation"></span>
                        <a class="comment__link comment__link--deny" title="{{ 'Ablehnen'|trans }}" role="link" href="#{{ comment.id }}-deny">
                            {{ 'Ablehnen'|trans }}
                            <span class="h-offscreen">{{ 'den Kommentar ablehnen'|trans }}</span>
                            <span class="count"></span>
                        </a>
                    </li>
                {% endfor %}
            </ol>
        {% endif %}
    </li>
{% endfor %}
<li style="display:none" data-ids="{{ commentIds|join(',') }}" class="comment_ids--js" aria-hidden="true"></li>
