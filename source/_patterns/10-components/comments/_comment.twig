{% set commentIds = [] %}
{% for comment in comments %}
    {% set commentIds = commentIds|merge([comment.id]) %}
    <li id="comment_{{ comment.id }}" class="comment">
        <cite class="comment__user {% if comment.isEditorialAnswer %} comment__user--srf{% endif %}" role="combobox">
            <span class="h-offscreen">{{ default.comment_by|default("Kommentar von") }} </span>{{ comment.name }}
            {% if comment.isEditorialAnswer %}<span
                    class="h-offscreen">(SRF)</span>{% else %}({{ comment.nickname }}){% endif %}
        </cite>
        <span class="comment__time">{{ comment.dateFormatted }}</span>
        <blockquote class="comment__content">{{ comment.message }}</blockquote>
        <a class="comment__link comment__link--agree" role="link" href="#{{ comment.id }}-agree">
            {{ 'Zustimmen'|trans }}
            <span class="h-offscreen">{{ 'dem Kommentar zustimmen'|trans }}</span>
            <span class="count"></span>
        </a>
        <a class="comment__link comment__link--deny" role="link" href="#{{ comment.id }}-deny">
            {{ 'Ablehnen'|trans }}
            <span class="h-offscreen">{{ 'den Kommentar ablehnen'|trans }}</span>
            <span class="count"></span>
        </a>

        {% if allowsComments %}
            <a class="comment__link comment__link--reply" href="#{{ comment.id }}-reply"
               role="link">{{ default.link_reply|default("Antworten") }}
                <span class="h-offscreen">{{ default.select_to_reply|default("anw√§hlen um auf den Kommentar zu antworten") }}</span>
            </a>
            <span class="comment__placeholder" id="placeholder_{{ comment.id }}"></span>
        {% endif %}
        {% if comment.children|length > 0 %}
            <ol class="comments comments--replies">
                {% for reply in comment.children %}
                    {% set commentIds = commentIds|merge([reply.id]) %}
                    <li id="comment_{{ reply.id }}" class="comment">
                        <span class="h-offscreen">{{ default.reply_by|default("Antwort von") }} </span>
                        <cite class="comment__user {% if reply.isEditorialAnswer %} comment__user--srf{% endif %}">
                            {{ reply.name }}{% if not reply.isEditorialAnswer %} ({{ reply.nickname }}){% endif %}</cite>
                        <span class="comment__time">{{ reply.dateFormatted }}</span>
                        <blockquote class="comment__content">{{ reply.message }}</blockquote>
                        <a class="comment__link comment__link--agree" role="link" href="#{{ comment.id }}-agree">
                            {{ 'Zustimmen'|trans }}
                            <span class="h-offscreen">{{ 'dem Kommentar zustimmen'|trans }}</span>
                            <span class="count"></span>
                        </a>
                        <a class="comment__link comment__link--deny" role="link" href="#{{ comment.id }}-deny">
                            {{ 'Ablehnen'|trans }}
                            <span class="h-offscreen">{{ 'den Kommentar ablehnen'|trans }}</span>
                            <span class="count"></span>
                        </a>
                    </li>
                {% endfor %}
            </ol>
        {% endif %}
    </li>
{% endfor %}
<li style="display:none" data-ids="{{ commentIds|join(',') }}" class="comment_ids--js" aria-hidden="true"></li>
