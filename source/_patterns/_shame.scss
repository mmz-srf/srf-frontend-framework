/*
 * This file exists solely for nasty browser hacks, fallbacks and fixes.
 *
 * It is envisaged that we DELETE the code-snippets as soon as support for each targeted browser is deprecated.
 * Therefore watch out for the «TARGETED BROWSER»-comments at the beginning of each function in this file.
 */




/*
 * TARGETED BROWSER: IE 11 and Edge <= 15
 *
 * This styles are needed for image--media-still classes on which the object-fit-fallback of srf-shame.js is applied.
 * Parents of elements with those classes usually restrict the aspect ratio of its box. Without the following rules
 * the hight of the fallback-<div> would be 0.
 *
 */
.image--media-still,
.image--media-still-video {
  .js-fake-image-object-fit {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
}
.teaser__medium-wrapper {
  .js-fake-image-object-fit {
    height: 100%;
  }
}

/*
 * TARGETED BROWSERS: ALL :(
 *
 * For iOS mobile devices we did some funky stuff with the <html> and <body> element (namely position: relative;) on
 * the body and position: fixed; on the menu on tablet-up. This results in wrong positioning of the Floating-Focus-Elem.
 * After the Header has been properly fixed, this can be removed.
 */
// sass-lint:disable no-ids
.menu--opened #flying-focus {
  margin-top: -56px;
}

@media (max-width: 719px) {
  .menu--opened #flying-focus {
    display: block;
    margin-top: 0;
  }
}
// sass-lint:enable no-ids


/*
 * TARGETED BROWSER: IE 11
 *
 * IE11 _sometimes_ has problems with scaled images with svg sources. The usual remedies (viewbox, no widths, etc.)
 * didn't help. This is the last resort - hiding the img and setting a background-image on the parent.
 */
.header-startlink--fixed-for-ie {
  width: 39px;
  height: 26px;
  background-image: url('../img/srf_logo_fallback.png');
  margin: 15px 16px;
  padding: 0;
}

.header-startlink--fixed-for-ie-rtr {
  background-image: url('../img/rtr_logo_fallback.png');
}

.header-startlink--fixed-for-ie .header-logo {
  display: none;
}



/*
 * TARGETED BROWSER: IE 11
 *
 * CSS Custom Properties double-fallbacks 'cause of IE 11 … why-oh-why do we still support Internet Explorer!?
 * Tell me, tell me now! Your arguments better be damn good!
 */
_:-ms-fullscreen,
:root .modal.modal--theme-dark .modal-main-wrapper {
  background-image: linear-gradient(135deg, #22211d, #111111);
  box-shadow: $shadow-elevation8;
}


/*
 * TARGETED BROWSER: IE 11
 *
 * overriding the img { height: auto } in _globals.scss because "IE will auto-scale the image area to keep the width:height
 * aspect ratio constant, but it won't scale the actual drawing to match the scale of the image dimensions.
 * see: https://css-tricks.com/scale-svg/#article-header-id-2
 */

@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  .main-logo {
    img {
      height: 100%;
    }
  }
}


/*
 * TARGETED BROWSER: Safari
 *
 * Safari has troubles combining overflow-x: hidden and its own webkit-overflow-scrolling: touch.
 * This makes the 3rd-level-Navigation points not show up.
 */
.subnav--open-3rd-level {
  overflow-x: auto;

  .subnav__list {
    -webkit-overflow-scrolling: initial;
  }
}

/*
 * TARGETED BROWSER: Safari 10.*
 *
 * Mobile Safari on iOS 10.* does not trigger clicks on the Media elements.
 *
 * http://www.shdon.com/blog/2013/06/07/why-your-click-events-don-t-work-on-mobile-safari
 * > It does not generate click events for elements that do not have either or both of:
 * > - A directly bound onclick handler.
 * > - The cursor property set to pointer in CSS.
 */
.js-media {
  cursor: pointer;
}


/*
 * TARGETED BROWSER: IE 11
 *
 * bottom and right borders of collections (which are created by box-shadows) are not rendered
 * properly in many cases. increasing the shadow blur solves it.
 */

@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  .collection__content-wrapper {
    box-shadow: 0 0 2px 0 rgba(0,0,0,0.16), 0 0 2px 0 rgba(0,0,0,0.08);
  }
}
